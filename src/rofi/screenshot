#!/usr/bin/env bash

dmenu() { rofi -dmenu "$@"; }

Options=(
	'Full Screen'
	'Focused Window'
	'Choose Specific Area/Window'
)

Choice=$(printf '%s\n' "${Options[@]}" | dmenu -i -p 'Screenshot')

[[ -z $Choice ]] && exit 0

ss() {
	local Dest="$HOME/Pictures/$(printf '%(%F_%T)T').png"
	if maim "$@" "$Dest"; then
		dunstify -u low -i "$Dest" 'Captured Successfully...'
	else
		dunstify -u low 'Failed to Capture...'
	fi
}

case $Choice in
	${Options[0]})
		ss ;;

	${Options[1]})
		ss -i "$(xdotool getactivewindow)" ;;

	${Options[2]})
		ss -s ;;
esac
