#!/bin/sh

while read CurLine; do
	case "$CurLine" in
		*xkb_symbols*)
			break ;;
	esac
done <<-EOF
	`setxkbmap -print`
EOF

read F1 F2 F3 F4 _ <<-EOF
	$CurLine
EOF

IFS='+' read F1 F2 _ <<-EOF
	$F4
EOF

case "$F2" in
	us*)
		setxkbmap th ;;
	*)
		setxkbmap us -variant colemak_dh \
			-option ctrl:nocaps \
			-option shift:both_capslock ;;
esac
