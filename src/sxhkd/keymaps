#!/bin/sh

while read Curline; do
	case $Curline in
		*xkb_symbols*)
			break ;;
	esac
done <<-EOF
	`setxkbmap -print`
EOF

IFS='+' read _ Keymap _ <<-EOF
	$Curline
EOF

case $Keymap in
	us*)
		setxkbmap th
		dunstify -u low -r 71 'Keymap: th' ;;
	*)
		setxkbmap us -variant grammak_iso
		dunstify -u low -r 71 'Keymap: us(grammak_iso)' ;;
esac
