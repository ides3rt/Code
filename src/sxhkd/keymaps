#!/bin/sh

while read Curline; do
	case "$Curline" in
		*xkb_symbols*)
			break ;;
	esac
done <<-EOF
	`setxkbmap -print`
EOF

IFS='+' read F1 Keymap _ <<-EOF
	$Curline
EOF

case "$Keymap" in
	us*)
		setxkbmap th
		xmodmap -e 'clear Lock' -e 'keycode 66 = Escape' ;;
	*)
		setxkbmap us -variant grammak_iso ;;
esac
